{
  "name": "axonops-all-in-one",
  "cookbook_version": "0.2.0",
  "description": "Complete AxonOps stack on a single node (development/testing)",
  "chef_environment": "development",
  "normal": {
    "tags": ["all-in-one", "development", "test"],
    "axonops": {
      "offline_install": false,
      "skip_system_tuning": true,
      "skip_vm_max_map_count": true,
      "skip_vm_swappiness": true,
      "agent": {
        "hosts": "localhost",
        "port": 1888,
        "api_key": "dev-api-key",
        "tls_mode": "disabled",
        "org_name": "dev-org",
        "tags": {
          "environment": "development",
          "purpose": "testing"
        }
      },
      "server": {
        "listen_address": "0.0.0.0",
        "listen_port": 8080,
        "tls": {
          "mode": "disabled"
        },
        "auth": {
          "enabled": false
        },
        "elastic": {
          "install": true,
          "url": "http://localhost:9200",
          "heap_size": "2g",
          "cluster_name": "axonops-dev",
          "node_name": "es-dev-01"
        },
        "cassandra": {
          "install": true,
          "hosts": ["localhost"],
          "port": 9042,
          "keyspace": "axonops",
          "replication_factor": 1
        },
        "retention": {
          "events": "14d",
          "security_events": "8w",
          "metrics": {
            "high_resolution": "7d",
            "medium_resolution": "4w",
            "low_resolution": "6M",
            "super_low_resolution": "1y"
          },
          "backups": {
            "local": "10d",
            "remote": "30d"
          }
        }
      },
      "cassandra": {
        "cluster_name": "DevCluster",
        "dc": "datacenter1",
        "rack": "rack1",
        "heap_size": "2G",
        "seeds": ["127.0.0.1"],
        "listen_address": "127.0.0.1",
        "rpc_address": "127.0.0.1",
        "native_transport_port": 9042,
        "storage_port": 7000,
        "ssl_storage_port": 7001,
        "jmx_port": 7199,
        "compaction_throughput_mb_per_sec": 16,
        "concurrent_reads": 16,
        "concurrent_writes": 16,
        "endpoint_snitch": "SimpleSnitch"
      },
      "dashboard": {
        "enabled": true,
        "port": 3000,
        "nginx": {
          "enabled": false
        }
      },
      "java": {
        "version": "17",
        "jvm_options": {
          "enable_assertions": true,
          "thread_priority_policy": 42
        }
      }
    }
  },
  "run_list": [
    "recipe[axonops::java]",
    "recipe[axonops::system_tuning]",
    "recipe[axonops::elasticsearch]",
    "recipe[axonops::cassandra]",
    "recipe[axonops::server]",
    "recipe[axonops::dashboard]",
    "recipe[axonops::agent]"
  ]
}
