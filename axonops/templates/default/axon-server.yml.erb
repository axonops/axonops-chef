# AxonOps Server Configuration
# Generated by Chef - Local modifications will be overwritten

server:
  host: <%= @listen_address %>
  port: <%= @listen_port %>

elastic:
  host: "<%= @elastic_host %>"
  port: <%= @elastic_port %>

cassandra:
  hosts:
<% @cassandra_hosts.each do |host| -%>
    - "<%= host %>"
<% end -%>
  username: "<%= @cassandra_username %>"
  password: "<%= @cassandra_password %>"
  dc: "<%= @cassandra_dc %>"

<% if @tls_mode != 'disabled' -%>
tls:
  mode: <%= @tls_mode %>
<% if @tls_cert_file -%>
  certFile: <%= @tls_cert_file %>
<% end -%>
<% if @tls_key_file -%>
  keyFile: <%= @tls_key_file %>
<% end -%>
<% if @tls_ca_file && @tls_mode == 'mTLS' -%>
  caFile: <%= @tls_ca_file %>
<% end -%>
<% end -%>

retention:
  events: <%= @retention['events'] %>w
  security_events: <%= @retention['security_events'] %>w
  
  metrics:
    high_resolution: <%= @retention['metrics']['high_resolution'] %>d
    medium_resolution: <%= @retention['metrics']['medium_resolution'] %>w
    low_resolution: <%= @retention['metrics']['low_resolution'] %>M
    super_low_resolution: <%= @retention['metrics']['super_low_resolution'] %>y
  
  backups:
    local: <%= @retention['backups']['local'] %>d
    remote: <%= @retention['backups']['remote'] %>d