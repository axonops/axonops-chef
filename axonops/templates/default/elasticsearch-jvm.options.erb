## JVM configuration
# Generated by Chef - Local modifications will be overwritten

################################################################
## IMPORTANT: JVM heap size
################################################################

-Xms<%= @heap_size %>
-Xmx<%= @heap_size %>

################################################################
## Expert settings
################################################################

## GC configuration
-XX:+UseG1GC
-XX:G1ReservePercent=25
-XX:InitiatingHeapOccupancyPercent=30

## G1GC Configuration
-XX:+AlwaysPreTouch
-XX:+DisableExplicitGC
-XX:+HeapDumpOnOutOfMemoryError

## JVM temporary directory
-Djava.io.tmpdir=${ES_TMPDIR}

## Heap dump path
-XX:HeapDumpPath=/var/lib/elasticsearch

## Error file
-XX:ErrorFile=/var/log/elasticsearch/hs_err_pid%p.log

## JDK 8 GC logging
8:-XX:+PrintGCDetails
8:-XX:+PrintGCDateStamps
8:-XX:+PrintTenuringDistribution
8:-XX:+PrintGCApplicationStoppedTime
8:-Xloggc:/var/log/elasticsearch/gc.log
8:-XX:+UseGCLogFileRotation
8:-XX:NumberOfGCLogFiles=32
8:-XX:GCLogFileSize=64m

## JDK 9+ GC logging
9-:-Xlog:gc*,gc+age=trace,safepoint:file=/var/log/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m