# AxonOps Dashboard Configuration
# Generated by Chef - Local modifications will be overwritten

# Server connection settings
server:
  # AxonOps server endpoint
  endpoint: "<%= @server_endpoint || 'http://localhost:8080' %>"
  
  # API timeout settings
  timeout:
    connect: 30s
    read: 60s
    write: 60s

# Dashboard web server settings
web:
  # Listen address and port
  host: "<%= @listen_host %>"
  port: <%= @listen_port %>
  
  # Context path for the dashboard (e.g., /axonops)
  context_path: "<%= @context_path || '/' %>"
  
  # Session configuration
  session:
    # Session timeout in minutes
    timeout: 30
    
    # Session cookie settings
    cookie:
      secure: false  # Set to true if using HTTPS
      http_only: true
      same_site: "lax"

# Authentication settings
auth:
  # Authentication provider (local, ldap, oauth)
  provider: "local"
  
  # Local authentication settings
  local:
    # Allow self-registration
    allow_registration: false
    
    # Password policy
    password:
      min_length: 8
      require_uppercase: true
      require_lowercase: true
      require_numbers: true
      require_special: false
  
  # LDAP settings (if provider is ldap)
  # ldap:
  #   url: "ldap://localhost:389"
  #   base_dn: "dc=example,dc=com"
  #   user_dn_pattern: "uid={0},ou=people"
  #   group_search_base: "ou=groups"
  #   group_search_filter: "(member={0})"

# UI customization
ui:
  # Application title
  title: "AxonOps"
  
  # Logo URL (relative to context path)
  # logo: "/assets/logo.png"
  
  # Theme (light, dark, auto)
  theme: "auto"
  
  # Dashboard refresh intervals (seconds)
  refresh:
    default: 30
    options: [10, 30, 60, 300]
  
  # Date/time format
  datetime:
    format: "YYYY-MM-DD HH:mm:ss"
    timezone: "UTC"

# Feature toggles
features:
  # Enable/disable specific features
  alerts: true
  backups: true
  repairs: true
  analytics: true
  logs: true
  config_management: true
  user_management: true
  
  # Beta features
  beta:
    enabled: false
    features: []

# Logging configuration
logging:
  # Log level (debug, info, warn, error)
  level: "info"
  
  # Log file settings
  file:
    enabled: true
    path: "/var/log/axonops/dashboard.log"
    max_size: "100MB"
    max_files: 10
  
  # Console logging
  console:
    enabled: true
    format: "json"  # text or json

# Performance settings
performance:
  # Maximum concurrent API requests
  max_concurrent_requests: 100
  
  # Request rate limiting
  rate_limit:
    enabled: true
    requests_per_minute: 1000
    burst: 100
  
  # Cache settings
  cache:
    enabled: true
    ttl: 300s
    max_size: "100MB"

# Security settings
security:
  # Content Security Policy
  csp:
    enabled: true
    policy: "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';"
  
  # CORS settings
  cors:
    enabled: true
    allowed_origins: ["*"]
    allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
    allowed_headers: ["*"]
    exposed_headers: ["X-Total-Count"]
    max_age: 3600
  
  # Security headers
  headers:
    x_frame_options: "DENY"
    x_content_type_options: "nosniff"
    x_xss_protection: "1; mode=block"
    strict_transport_security: "max-age=31536000; includeSubDomains"

# Metrics and monitoring
metrics:
  # Enable Prometheus metrics endpoint
  prometheus:
    enabled: true
    path: "/metrics"
    
  # Internal metrics collection
  internal:
    enabled: true
    interval: 60s